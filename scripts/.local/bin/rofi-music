#!/usr/bin/env bash
# Music picker using rofi and mpc
# Searches MPD database - shows "Artist - Album - Title" format

# Get all songs formatted as "Artist - Album - Title\tfile"
selection=$(mpc listall -f "%artist% - %album% - %title%\t%file%" | \
    rofi -dmenu -i -p "Play" -display-columns 1) || exit 0

# Extract the file path (after the tab)
file=$(echo "$selection" | cut -f2)

notify-send "Playing $(echo "$selection" | cut -f1)" && \
    mpc insert "$file" && \
    mpc next >/dev/null && \
    mpc play >/dev/null
